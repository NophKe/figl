<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<META NAME="generator" CONTENT="http://txt2tags.org">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<LINK REL="stylesheet" TYPE="text/css" HREF="inc/site.css">
<TITLE>Éditer du texte avec la console... </TITLE>
</HEAD>
<BODY>

<DIV CLASS="header" ID="header">
<H1>Éditer du texte avec la console... </H1>
</DIV>

<DIV CLASS="body" ID="body">
<DIV CLASS="toc">

  <UL>
  <LI><A HREF="#toc1">Les Outils du shell</A>
    <UL>
    <LI><A HREF="#toc2">cat</A>
    </UL>
  <LI><A HREF="#toc3">Différents éditeurs</A>
    <UL>
    <LI><A HREF="#toc4">ex</A>
    <LI><A HREF="#toc5">Vi</A>
    <LI><A HREF="#toc6">Nano</A>
    </UL>
  <LI><A HREF="#toc7">Vim</A>
    <UL>
    <LI><A HREF="#toc8">Aide Mémoire</A>
    <LI><A HREF="#toc9">Les Astuces</A>
    <LI><A HREF="#toc10">Trouver de l'aide</A>
    </UL>
  <LI><A HREF="#toc11">Emacs</A>
  </UL>

</DIV>
<P>
Pour administrer correctement une <A HREF="08_libre.php#distrib">distribution</A> Gnu-Linux, vous aurez parfois à modifier des fichiers de configuration!
</P>
<P>
De la même façon, pour dépanner votre système, vous n'aurez parfois pas d'autre choix que de vous connecter au travers de l'interface texte!
</P>
<P>
Nous allons donc voir différents moyens d'éditer un texte depuis une console.
</P>

<A NAME="toc1"></A>
<H1>Les Outils du shell</H1>

<A NAME="toc2"></A>
<H2>cat</H2>

<P>
Un moyen simple <U>et pas du tout efficace</U> de créer un fichier texte est d'utiliser la commande <CODE>cat</CODE>.
</P>
<P>
Dans les pages précédentes, on a utiliser <CODE>cat</CODE> pour afficher le contenu des fichiers. En faits, ce n'est pas vraiment comme cela que <CODE>cat</CODE> fonctionne.
</P>
<P>
<CODE>cat</CODE> sert à concaténer, c'est à dire mettre l'un à la suite de l'autre.
</P>
<P>
Supposons deux fichiers:
</P>

<UL>
<LI>Le premier contient une seule ligne
<LI>Le second en contient deux.
</UL>

<P>
Et dans la pratique, créez deux fichiers quelconques pour vous entrainer!
A ce stade vous savez déja le faire, n'est-ce pas? Sinon, il faut revenir en arrière... Et ne vous contentez pas lire cette fois, tapez le code avec vos doigts et votre clavier!
</P>
<P>
Donc on a deux fichiers:
</P>

<PRE>
$ cat une_ligne.txt
Ce fichier contient une ligne de texte
$ cat deux_lignes.txt
Ce fichier ci,
tient sur deux lignes
$ _
</PRE>

<P>
Rien d'exceptionnel! Mais si je fais:
</P>

<PRE>
$ cat une_ligne.txt deux_lignes.txt
Ce fichier contient une ligne de texte
Ce fichier ci,
tient sur deux lignes
$ _
</PRE>

<P>
On voit que les deux fichiers sont bien concaténés! (Prenez l'habitude de ce mot, il est le terme technique en vigueur)
</P>
<P>
A l'aide du <A HREF="02_boot.php#shell">shell</A> je peux rediriger la sortie standard (l'écran) vers un fichier.
</P>

<PRE>
$ cat une_ligne.txt deux_lignes.txt &gt;&gt; foo
$ cat foo
Ce fichier contient une ligne de texte
Ce fichier ci,
tient sur deux lignes
$ _
</PRE>

<P>
Si je ne donne pas de direction de sortie. <CODE>cat</CODE> suppose que c'est la sortie standard.
</P>
<P>
Mais que ce passe t il si je ne donne pas de précision ni sur l'entrée ni sur la sortie?
</P>

<PRE>
$ cat
J'ai perdu la prompte
J'ai perdu la prompte
Tout ce que je tape au [clavier 01_hardware.php#keyb] est répété sur l'écran à chaque fois
Tout ce que je tape au [clavier 01_hardware.php#keyb] est répété sur l'écran à chaque fois
que je tape la touche [ entrée ]
que je tape la touche [ entrée ]
Pour sortir de la boucle [ Ctrl + C ]
</PRE>

<P>
Il <B>faut</B> taper la touche [ entrée ] pour que la ligne soit envoyée dans le fichier.
</P>
<P>
Le combo des touches [ Ctrl + C ] produit un <A HREF="09_shell.php#echap">caractère d'échappement</A> à l'attention du shell, et lui signale de reprendre le contrôle sur le programme.
</P>
<P>
Si j'omets uniquement de donner une entrée, <CODE>cat</CODE> suppose qu'il faut utiliser l'entrée standard (le clavier).
Et je peux toujours rediriger la sortie vers un fichier...
</P>

<PRE>
$ cat &gt; foo
Redirection simple, un seul symbole &gt; (remplacer)...
[ Ctrl + C ]
$ _
</PRE>

<P>
On vérifie?
</P>

<PRE>
$ cat foo
Redirection simple, un seul symbole &gt; (remplacer)...
</PRE>

<P>
Ça fonctionne! On continue?
</P>

<PRE>
$ cat &gt;&gt; foo
Redirection double, deux symboles  &gt;&gt; (concaténer)...
[ Ctrl + C ]
</PRE>

<P>
On vérifie une dernière fois ce qui a été inscrit dans le fichier...
</P>

<PRE>
$ cat foo
Redirection simple, un seul symbole &gt; (remplacer)...
Redirection double, deux symboles  &gt;&gt; (concaténer)...
</PRE>

<P>
Magnifique! Vous vous souviendrez bien que Control + C quitte un <A HREF="04_software.php#intro">programme</A> en cours. Et les puristes vont me jeter des pierres....
</P>
<P>
<I>(Mais promis on parlera de EOF un de ces jours...)</I>
</P>

<A NAME="toc3"></A>
<H1>Différents éditeurs</H1>

<A NAME="toc4"></A>
<H2>ex</H2>

<P>
Le mode d'édition que l'on vient de décrire avec la commande <CODE>cat</CODE> convient très bien à des téléscripteurs munis uniquement d'une imprimante! <CODE>ex</CODE> est un très vieil éditeur de texte en mode ligne de commande qui repose sur ce genre de principe.
</P>
<P>
Comme ex est trop obsolète pour être inclus dans une <A HREF="08_libre.php#distrib">distribution</A> Gnu-Linux moderne on peut se donner une idée de son fonctionnement par une option du <A HREF="04_software.php#intro">programme</A> <CODE>vi</CODE> ( on reparle très vite de vi! )
</P>
<P>
Comme il a déjà été dit sur les paginateurs. Ce <A HREF="04_software.php#intro">programme</A> va prendre le contrôle du clavier. Sachez donc tout de suite utiliser l'interface.
</P>

<PRE>
$ vi -e foo
:

</PRE>

<P>
Lors du lancement <CODE>ex</CODE> n'affiche pas le contenu du fichier, mais juste sa propre prompte ``: ``.
</P>
<P>
Pour afficher une ligne, il faut entrer la lettre <CODE>p</CODE> et la touche entrée pour valider la commande. Ainsi:
</P>

<PRE>
: p
tient sur deux lignes
</PRE>

<P>
Le <A HREF="04_software.php#intro">programme</A> n'a affiché que la ligne 2!
</P>
<P>
Pour se placer ligne 1 faire simplement:
</P>

<PRE>
: 1
</PRE>

<P>
Essayez d'afficher la ligne courante...
</P>

<PRE>
: p
Ce fichier ci,
:
</PRE>

<P>
Pour modifier une ligne, utilisons la lettre <CODE>i</CODE> pour passer en mode d'insertion.
</P>

<PRE>
: i
Bla Bla Bla...
[ ctrl + C ]
:
</PRE>

<P>
On a déjà vu le cas, lorsque vous entrez en mode insertion, tout ce que vous tapez devient l'argument de la commande i (insertion). Et tant que le <A HREF="09_shell.php#echap">caractère d'échappement</A> n'a pas été entré, tout ce qui suit est considéré comme du texte à insérer.
</P>
<P>
Pour enregistrer la lettre w (write):
</P>

<PRE>
: w
deux_lignes.txt               2 lignes écrites
: _
</PRE>

<P>
Pour quitter la lettre q :
</P>

<PRE>
: q
E37: Modifications non enregistrées
:
</PRE>

<P>
Et le point d'exclamation pour passer outre les avertissements! Et revenir à la prompte du shell!
</P>

<PRE>
: q!
$ _
</PRE>

<A NAME="toc5"></A>
<H2>Vi</H2>

<P>
C'est un <A HREF="04_software.php#intro">programme</A> qui fait partie du standard POSIX. A priori, vous devriez donc le trouver sur n'importe quelle <A HREF="08_libre.php#distrib">distribution</A> Gnu-Linux.
</P>
<P>
C'est un <A HREF="04_software.php#intro">programme</A> dont l'interface peut être assez déroutante! En effet, la première version de vi date de 1976...
</P>
<P>
Enfin c'est un éditeur modal qui démarre en mode commande.
</P>
<P>
A la différence de ex, c'est un éditeur visuel, en ce sens qu'il vous affiche à l'écran le texte que vous modifiez. Ce n'est pas un <A HREF="04_software.php#intro">programme</A> fait pour être utilisé sur un téléscripteur!
</P>
<P>
<U>Le principe d'une édition sur Vi:</U>
</P>

<UL>
<LI>Le <A HREF="04_software.php#intro">programme</A> démarre donc en <B>mode de commande</B>.
<P></P>
</UL>

	<BLOCKQUOTE>
	Les touches <CODE>h</CODE> / <CODE>j</CODE> / <CODE>k</CODE> / <CODE>l</CODE>  pour gauche / bas / haut / droite vous permettrons de déplacer le curseur. ( <I>Par défaut les flèches ne fonctionnent pas</I> )
	</BLOCKQUOTE>

<UL>
<LI>Une fois votre curseur placé taper <CODE>i</CODE> pour passer en <B>mode insertion</B>.
<P></P>
</UL>

	<BLOCKQUOTE>
	Les touches <CODE>h</CODE> / <CODE>j</CODE> / <CODE>k</CODE> / <CODE>l</CODE>  pour ne permettrons plus de déplacer le curseur. ( <I>Elles servent comme les autres touches du <A HREF="01_hardware.php#keyb">clavier</A> à entrer du texte</I> )
	</BLOCKQUOTE>

<UL>
<LI>Une fois votre modification effectué taper [ Echap ] pour quitter le mode insertion, et revenir en <B>mode commande</B>
<P></P>
</UL>

	<BLOCKQUOTE>
	Les touches <CODE>h</CODE> / <CODE>j</CODE> / <CODE>k</CODE> / <CODE>l</CODE>  pour gauche / bas / haut / droite vous permettrons de déplacer le curseur. ( <I>Par défaut les flèches ne fonctionnent pas</I> )
	</BLOCKQUOTE>

<UL>
<LI>Enfin taper <CODE>:</CODE> vous fera passer en <B>mode ex</B> !
<P></P>
</UL>

	<BLOCKQUOTE>
	Donc si vous avez lu le paragraphe précédent vous comprendrez que la sequence de touches <CODE>:wq</CODE> vous permet d'enregistrer et de quitter.
	</BLOCKQUOTE>
<P>
Je n'en dis pas plus sur vi. C'est un <A HREF="04_software.php#intro">programme</A> assez daté, mais il est standard et donc présent partout! De plus il permet de se connecter à des systèmes distants, car aucune de ses commandes au <A HREF="01_hardware.php#keyb">clavier</A> ne sont interprétées comme des <A HREF="09_shell.php#echap">caractères d'échappement</A> par les différents shells.
</P>
<P>
Vim reprend l'essentiel du comportement de vi et le porte beaucoup plus au loin! Il n'est donc pas forcément nécessaire d'aller plus loin au sujet vi.
</P>
<P>
Apprendre à utiliser Vim (même un peu) vous suffira pour utiliser vi s'il est le seul éditeur disponible sur le système.
</P>

<A NAME="toc6"></A>
<H2>Nano</H2>

<P>
C'est un petit éditeur moderne, et assez intuitif. Il est fréquemment installé par défaut et il s'intègre bien avec systemd.
</P>
<P>
Lorsque vous le démarrer, ce dernier présente comme une sorte de barre d'outils, en bas de l'écran. C'est un panneaux qui reprends les fonctions de base de ce logiciel.
</P>
<P>
Le Symbole <CODE>^</CODE> représente la touche [ Ctrl ].
</P>
<P>
Ce n'est pas un logiciel modal. On entre dans le <A HREF="04_software.php#intro">programme</A> directement en insertion. Et tout ce que l'on écrit, s'inscrit à l'écran, et donc dans le fichier.
</P>
<P>
Les combinaisons de touches permettent d'accéder aux fonction du logiciel. Ctrl + O pour enregistrer, Ctrl + X pour quitter...
</P>
<P>
<A HREF="https://fr.wikipedia.org/wiki/GNU_nano"><IMG ALIGN="middle" SRC="./img/nano.png" BORDER="0" ALT=""></A>
</P>

<TABLE ALIGN="center">
<TR>
<TD>GNU nano, un éditeur pour la nouvelle génération ( credit Wikipedia)</TD>
</TR>
</TABLE>

<P>
<U>Remarque</U>: Notez au passage que les couleurs de l'image ne sont pas dans le fichier texte, il s'agit bien d'un fichier texte pur. (Aucun logiciel de traitement de texte n'est passé par là...) Ces couleurs sont la coloration syntaxique. Tous les bons éditeurs offrent une coloration syntaxique qui permet de rendre la programmation, et l'écriture de fichiers de configuration plus agréable.
</P>

<A NAME="toc7"></A>
<H1>Vim</H1>

<P>
C'est la version moderne de vi.
Vim arrive par défaut beaucoup mieux configuré que vi. (Par exemple il permet d'utiliser les flèches sur le clavier...)
</P>
<P>
Pour apprendre à l'utiliser, entrez la commande:
</P>

<PRE>
$ vimtutor
</PRE>

<P>
Cela devrait vous donner les bases...
</P>
<P>
Des bases qui seront également valables pour vi ( qui fait partie du standard POSIX ). Je vous conseille donc vivement d'installer vim et d'entrer cette commande.
</P>
<P>
<U>PS:</U> Je suis sérieux, en installant le programme, et en exécutant cette commande, vous serez parti pour un guide interactif. Ce guide vous permettra de vous familiariser en une quinzaine de minutes à Vim.
</P>
<P>
Vous n'allez pas vous retrouver devant un livre de 150 pages difficiles à lire. Ce tutoriel est ludique et pratique. Prenez le temps d'y jeter un coup d'œil.
</P>

<A NAME="toc8"></A>
<H2>Aide Mémoire</H2>

<P>
<U>Pour ajouter du texte:</U>
</P>

<DL>
<DT><B>a</B></DT><DD>
ajoute après le curseur
<DT><B>A</B></DT><DD>
Ajoute en fin de ligne
<P></P>
<DT><B>i</B></DT><DD>
Ajoute sous le curseur
<DT><B>I</B></DT><DD>
Ajoute en début de ligne
</DL>

<P>
<U>Copier - Coller</U>
</P>

<DL>
<DT><B>dd</B></DT><DD>
Coupe la ligne courante
<DT><B>yy</B></DT><DD>
Copie la ligne courante
<P></P>
<DT><B>d5d</B></DT><DD>
Coupe cinq lignes
<DT><B>y6y</B></DT><DD>
Copie six lignes
<DT><B>P</B></DT><DD>
Coller avant le curseur
<P></P>
<DT><B>"+p</B></DT><DD>
Coller depuis le presse-papier de l'interface graphique.
</DL>

<P>
<U>Se déplacer</U>
</P>

<DL>
<DT><B>gg</B></DT><DD>
Aller au début du fichier
<DT><B>G</B></DT><DD>
Aller à la fin du fichier
<DT><B>zz</B></DT><DD>
Recentrer l'écran autour du curseur
</DL>

<A NAME="toc9"></A>
<H2>Les Astuces</H2>

<UL>
<LI>Quand vous passez en mode ex, la flèche du haut permet de rechercher dans l'historique.
<LI>Quand vous passez en mode ex, la touche [ tab ] donne accès à une auto-completion.
<LI>La touche <CODE>i</CODE> pour insertion est facile à mémoriser, mais <CODE>a</CODE> sert plus souvent.
</UL>

<A NAME="toc10"></A>
<H2>Trouver de l'aide</H2>

<P>
L'aide de Vim est très fournie, mais très anglophone.
</P>

<PRE>
:help
</PRE>

<P>
Pour une aide sur l'utilisation de l'aide,
</P>

<PRE>
:help help
</PRE>

<TABLE ALIGN="center">
<TR>
<TD><A HREF="http://david.blanchet.free.fr/vim/doc/fr62017/help.txt.html">Pour une traduction complète en français de l'aide de Vim</A></TD>
</TR>
</TABLE>

<A NAME="toc11"></A>
<H1>Emacs</H1>

<P>
Emacs est d'un autre gabarit. C'est un environnement de développement complet.
</P>
<P>
Vous pouvez consulter vos mail, lire une page de manuel, tout en faisant des "copier-coller" depuis chacun vers les autres! Tout avec un <A HREF="01_hardware.php#keyb">clavier</A> seulement!
</P>
<P>
Emacs intègre un interpréteur de commande en langage lisp. Il peut donc tout à fait remplacer votre shell.
</P>
<P>
Emacs intègre un navigateur internet et même des jeux...
</P>
	<BLOCKQUOTE>
	" Emacs est un <A HREF="04_software.php#os">système d'exploitation</A> parfait auquel,
	il manque uniquement un bon éditeur de texte... "
	</BLOCKQUOTE>
<P>
Vous comprendrez que vous proposer une introduction à Emacs est <I>hors-de-propos</I>.
</P>
<P>
Voici donc une sélection de liens utiles.
</P>
<P>
Si vous envisagez de vous investir à fond dans l'informatique ( ou d'en faire votre métier... ) Intéressez vous à Emacs. C'est un logiciel d'une richesse inouïe!
</P>

<TABLE ALIGN="center">
<TR>
<TD><A HREF="https://emacs.traduc.org/emacs_fr/emacs/emacs.html">Le Manuel d'Emacs en français</A></TD>
</TR>
</TABLE>

<HR NOSHADE SIZE=5>

<TABLE ALIGN="center" BORDER="1">
<TR>
<TD>PREC: <A HREF="10_console.html">Les commandes de base</A></TD>
<TD></TD>
<TD COLSPAN="2">SUIV: <A HREF="12_config.html">Les fichiers de configuration</A></TD>
</TR>
<TR>
<TD></TD>
<TD><A HREF="index.html">Menu Principal</A></TD>
<TD></TD>
</TR>
</TABLE>

<HR NOSHADE SIZE=5>

</DIV>
<!-- html code generated by txt2tags 2.6 (http://txt2tags.org) -->
<!-- cmdline: txt2tags 01_hardware.t2t.temp 02_boot.t2t.temp 03_interface.t2t.temp 04_software.t2t.temp 05_network.t2t.temp 06_unix.t2t.temp 07_disks.t2t.temp 08_libre.t2t.temp 09_shell.t2t.temp 10_console.t2t.temp 11_editor.t2t.temp 12_config.t2t.temp 13_help.t2t.temp 14_programming.t2t.temp 15_archlinux.t2t.temp 15_bashrc.t2t.temp author.t2t.temp bashrc_comment.t2t.temp index.t2t.temp roadmap.t2t.temp -->
</BODY></HTML>
-------------------------------------
Version Html, commentaires désactivés
-------------------------------------
