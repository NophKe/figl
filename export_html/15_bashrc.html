<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<META NAME="generator" CONTENT="http://txt2tags.org">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<LINK REL="stylesheet" TYPE="text/css" HREF="inc/site.css">
<TITLE>Un joli bashrc</TITLE>
</HEAD>
<BODY>

<DIV CLASS="header" ID="header">
<H1>Un joli bashrc</H1>
</DIV>

<DIV CLASS="body" ID="body">
<P>
<U>Rappel</U>: On ne touche pas √† cette ligne!
</P>

<PRE>
[[ $- != *i* ]] &amp;&amp; return
</PRE>

<PRE>

/bin/setleds -D num 2&gt;/dev/null
/bin/numlockx 2&gt;/dev/null

alias ls='ls --color=auto'
alias vi='vim'
alias i3='startx /bin/i3'
alias gnome='startx /bin/gnome-session'

PS1='[\u@\h \W]\$ '
</PRE>

<A NAME="toc1"></A>
<H1>L'algorithme</H1>

<A NAME="toc2"></A>
<H2>La d√©claration des variables</H2>

<PRE>
YdefautPTS="/dev/pts/*"
YdefautPTS_action="zsh"

YdefautTTY="/dev/tty*"
YdefautTTY_action="zsh"

YconsoleCourante=`tty`
</PRE>

<P>
== 
</P>

<PRE>
case $YconsoleCourante in
	
	'/dev/tty1' )			Yinit "startx /bin/i3"		;;
	'/dev/tty2' )			Ymenu				;;
	'/dev/pts/0' )			YsuRoot				;;
	$YdefautPTS )			Yinit "zsh"			;;
	$YdefautTTY )			Ymenu 				;;
esac
</PRE>

<A NAME="toc3"></A>
<H1>La d√©clarations des fonctions</H1>

<P>
Le <A HREF="02_boot.php#shell">shell</A> est un outils assez stupide, quand il ex√©cute un scripte, il commence la lecture de ce fichier, et l'ex√©cute ligne par ligne. Ainsi, si ce scripte contient le code d'une fonction, celle ci doit √™tre d√©clar√©e avant d'√™tre appel√©e. On ne peut donc pas appelle une fonction dont le code se trouve √† la fin du fichier.
</P>
<P>
Comme on voudra d√©composer le programmes en fonctions √©l√©mentaires et appeler ces fonctions avec diff√©rents param√®tres, on va d'abord √©crire nos fonctions. Le code principal du <A HREF="04_software.php#intro">programme</A> (celui qui fera appel √† ces fonctions) se trouvera √† la fin du code source.
</P>

<OL>
<LI>Une premi√®re fonction <CODE>YasciiArt</CODE> affiche un joli logo en Ascii-art.
<LI>Une fonction <CODE>Ybienvenu</CODE> affiche la date, l'heure, et le <A HREF="02_boot.php#login">terminal</A> utilis√©
<LI>Une fonction <CODE>Ywarning</CODE> affiche un avertissement d√©passe le timeout.
<LI>Une fonction <CODE>Yinit</CODE> ex√©cute un <A HREF="04_software.php#intro">programme</A> qui lui est donn√© en param√®tre
<LI>Une fonction <CODE>YsuRoot</CODE> propose  de se connecter sur le compte Administrateur
</OL>

<A NAME="toc4"></A>
<H2>YasciiArt</H2>

<A NAME="toc5"></A>
<H3>Mettre de la couleur</H3>

<P>
<CODE>tput</CODE> est un <A HREF="04_software.php#intro">programme</A> qui vous permet de modifier les param√®tres d'affichage du terminal.
</P>
<P>
Pour en savoir plus voyez la page du manuel <CODE>man tput</CODE>.
</P>

<DL>
<DT><B>tput</B> =<B>T</B>erminal <B>PUT</B></DT><DD>
envoi au terminal
<DT><B>setaf</B> =<B>SET A F</B>oreground</DT><DD>
d√©finie un avant-plan
<DT><B>setab</B> =:*SET A B**ackground</DT><DD>
d√©finie un arri√®re-plan
<DT><B>bold</B></DT><DD>
afficher en gras
<DT><B>clear</B></DT><DD>
vide l'√©cran <I>(rien √† voir avec le mot clair)</I>
</DL>

<P>
Ceci √©tant dit, voici comment on passe en arri√®re-plan noir, avant-plan bleu, en gras, et en efface l'√©cran.
</P>

<PRE>
	tput setab 0 
	tput setaf 4 
	tput bold
	tput clear

</PRE>

<A NAME="toc6"></A>
<H2>Retour sur echo</H2>

<P>
Le mot-cl√© <CODE>echo</CODE> sans argument <I>(c-√†-d sans message √† afficher...)</I> saute simplement une ligne.
</P>

<PRE>
	echo
</PRE>

<P>
On affiche un joli logo en Ascii-art...
</P>

<PRE>
	echo
	echo "                                        PPPPPPPPPPPPPPPPP."
	echo "                                        P=================P"
	echo "                                        P=====ppppppp======P"
	echo "                                        ¬∞PP===p     p=======P"
	echo "                                          P===p     p=======P"
	echo "                                          P===p     p=======P"
	echo "   NNN                                    P===PPPPPPP======P  HHHHH[&lt;80;141;5MHH   HHHHHH    kkkkk       kkkk         3333333333333333"
	echo "   NNNN     NNNNNNNNNNNNNNN_________      P==============PP     hh        hh      kkkk     kkkk                      333333"
	echo "   NNN NN     NNN         /OOOOOOOOOO.    P=====pPPPPPPPP       hh        hh      kkkk   kkkk                       333333 "
	echo "   NNN  NN    NNN         OO        |O    P=====P               hh        hh       KKKKKKK                    333333       "  
	echo "   NNN   NN   NNN         OO        |O    P=====P               hh        hh      kkkkKKKKK                       3333333  "
	echo "   NNN    NN  NNN         OO        |O    P=====P               HhhhhhhhhhHh      kkkk  KKK                           33333"
	echo "   NNN     NN NNN         OO        |O  pP======Pp              hh        hh      kkkk    kk                           3333" 
	echo "   NNN      NNNNN         OO        |O  P========P              hh        hh      kkkk     kk                         33333"
	echo "   NNN       NNNN         OO        |O  P========P              hh        hh      kkkk      kk            333         3333 "
	echo "   NNN        NNN         ¬∞oooooooooo/  PPPPPPPPPP           HHHHHH    HHHHHHH    kkkk       kkkkkkkk      3333333333333" 
	echo
	echo
</PRE>

<PRE>
	tput sgr0
}
</PRE>

<A NAME="toc7"></A>
<H2>Yinit</H2>

<P>
On appelle notre fonction YasciiArt, qui va afficher le logo.
</P>

<PRE>
	YasciiArt
</PRE>

<P>
On appelle notre fonction Ybienvenu, qui va afficher son message de Bienvenue.
</P>

<PRE>
Ybienvenue

</PRE>

<P>
Enfin, on execute le <A HREF="04_software.php#intro">programme</A> qui a √©t√© donn√© en premier param√®tre.
</P>

<PRE>
	exec $1
</PRE>

<A NAME="toc8"></A>
<H2>Ybienvenue</H2>

<PRE>
	tput setaf 2
	tput bold

	echo "Nous sommes le $(date +"%A %d %B")."
	echo
	echo " TERMINAL UTILIS√© :" $YconsoleCourante
	echo
	echo "Il est actuelement : $(date +"%H heures et %M minutes.")"	
	echo
	
	tput sgr0
</PRE>

<A NAME="toc9"></A>
<H2>YsuRoot</H2>

<PRE>
{
	Yinit
	echo " o ou O pour Oui, y ou Y pour Yes ..."
	echo 

</PRE>

<P>
Apr√®s une prompte demandant "Voulez-vous....." (-p "voulez-vou....") 
lire avec un time-out de 5 secondes (-t 5) un seul caractere ( -n 1  ) 
et le stocker dans la variable $CHOISIROOT
OU BIEN ( || )  c_a_d si cela n'a pas fonctionn√©... 
initialiser $CHOISIROOT avec la valeur "sans-reponse"
</P>

<PRE>
read -t 5 -n 1 -p " Voulez-vous devenir Root ?" CHOISI || CHOISI="sans reponse"
</PRE>

<PRE>
	case $CHOISI in 
		'o' | 'O' | 'y' | 'Y' )		Yinit "su root" 	;;
		* )				Yinit "zsh"		;;
	esac
}

</PRE>

<A NAME="toc10"></A>
<H2>Ywarning</H2>

<PRE>
	{	YasciiArt
		Ybienvenue
		
		tput setaf 3
		tput bold
		tput blink

		echo "TAPEZ   \" gnome \" pour d√©marrer un environnement graphique !" 
		echo
		
		tput sgr0
		
		exec zsh
}
</PRE>

<A NAME="toc11"></A>
<H1>Ymenu</H1>

<PRE>
{
	YasciiArt
	echo "		++++++++++++++++++++++++++++++++++++"
	echo "		+ CHOISIR ENVIRONNEMENT A DEMARRER +"
	echo "		++++++++++++++++++++++++++++++++++++"
	echo
	echo " 1- D√©marrer i3 Window Manager"
	echo
	echo " 2- D√©marrer Z-Shell"
	echo 
	echo " 3- D√©marrer Gnome Shell        &lt;--- Recommand√© si tu te sens perdu !!!"
	echo 
	echo " 4- Login as root"
	echo
	echo " 5- D√©marrer Bash"
	echo 
	
	tput bold
	
	echo " Tu as cinq secondes pour choisir..."
	echo
	
	read -t 5 -n 1 -p " Quel est ton choix? " CHOISI || CHOISI="sans_reponse"

	case $CHOISI in
	
		1 | '&amp;' )			Yinit "startx /bin/i3"			;;
		2 | '√©' )			Yinit "zsh" 				;;
		3 | '"' )			Yinit "startx /bin/gnome-session" 	;;
		4 | "\'") 			Yinit "su root"				;;
		5 | "\(" )			Yinit 					;;
	#	6 | '-' )							;;
	#	7 | √® )			 					;;
		"sans_reponse" )		Ywarning				;; 
		* )				Yinit "zsh"				;;
	esac
}



</PRE>

<HR NOSHADE SIZE=5>

<TABLE ALIGN="center" BORDER="1">
<TR>
<TD>PREC: <A HREF="15_archlinux.html">Cas pratique: Installer Arch-Linux</A></TD>
<TD></TD>
<TD COLSPAN="2">SUIV: <A HREF="author.html">La partie bio</A></TD>
</TR>
<TR>
<TD></TD>
<TD><A HREF="index.html">Menu Principal</A></TD>
<TD></TD>
</TR>
</TABLE>

<HR NOSHADE SIZE=5>

</DIV>
<!-- html code generated by txt2tags 2.6 (http://txt2tags.org) -->
<!-- cmdline: txt2tags 01_hardware.t2t.temp 02_boot.t2t.temp 03_interface.t2t.temp 04_software.t2t.temp 05_network.t2t.temp 06_unix.t2t.temp 07_disks.t2t.temp 08_libre.t2t.temp 09_shell.t2t.temp 10_console.t2t.temp 11_editor.t2t.temp 12_config.t2t.temp 13_help.t2t.temp 14_programming.t2t.temp 15_archlinux.t2t.temp 15_bashrc.t2t.temp author.t2t.temp bashrc_comment.t2t.temp index.t2t.temp roadmap.t2t.temp -->
</BODY></HTML>
-------------------------------------
Version Html, commentaires d√©sactiv√©s
-------------------------------------
